åœ¨å‡½æ•°ç»„ä»¶ï¼ˆFunction Componentsï¼‰ä¸­å·²ç»ä¸å†ä½¿ç”¨` componentDidMount()`ã€`componentDidUpdate()`ã€`componentWillUnmount()` è¿™äº›**ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ã€‚

å–è€Œä»£ä¹‹çš„æ˜¯ï¼š**React Hooksï¼ˆé’©å­ï¼‰**ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯ `useEffect`ã€‚å®ƒå¯ä»¥å®ç°å’Œ `componentDidMount`ã€`componentDidUpdate`ã€`componentWillUnmount` ç±»ä¼¼çš„åŠŸèƒ½ã€‚

### å‡½æ•°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ›¿ä»£æ–¹å¼

| ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ         | å‡½æ•°ç»„ä»¶ Hooks å†™æ³•                             |
| ---------------------- | ----------------------------------------------- |
| `componentDidMount`    | `useEffect(() => { ... }, [])`                  |
| `componentDidUpdate`   | `useEffect(() => { ... }, [deps])`              |
| `componentWillUnmount` | `useEffect(() => { return () => { ... } }, [])` |

å½“ useEffect æœ‰è¿”å›å€¼æ—¶ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ­¤å‡½æ•°å°†åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨è¢«è°ƒç”¨ï¼Œé€šå¸¸ç”¨äºæ‰§è¡Œæ¸…ç†é€»è¾‘ã€‚

### ç¤ºä¾‹ä»£ç  1

åœ¨çº¿è¿è¡Œæ•ˆæœ https://playcode.io/2458687

```js
function Counter() {
	const [count, setCount] = useState(0);

	// æ¨¡æ‹Ÿ componentDidMount
	useEffect(() => {
		console.log("ç»„ä»¶æŒ‚è½½");
	}, []);

	// æ¨¡æ‹Ÿ componentDidUpdateï¼šå½“ count æ›´æ–°æ—¶è¿è¡Œ
	useEffect(() => {
		console.log(`count æ›´æ–°ä¸º: ${count}`);
	}, [count]); // ğŸ‘ˆ ä¾èµ–æ•°ç»„å†™ countï¼Œè¡¨ç¤ºç›‘å¬å®ƒçš„å˜åŒ–

	// æ¨¡æ‹Ÿ componentWillUnmount
	useEffect(() => {
		return () => {
			console.log("ç»„ä»¶å¸è½½");
		};
	}, []);

	return (
		<div>
			<p>Count: {count}</p>
			<button onClick={() => setCount((c) => c + 1)}>+1</button>
		</div>
	);
}
```

### ç¤ºä¾‹ä»£ç  2

ä¹Ÿå¯ä»¥å°†ç»„ä»¶æŒ‚è½½ã€å¸è½½æ—¶çš„é€»è¾‘åˆå¹¶ï¼Œå†™è¿›åŒä¸€ä¸ª useEffect é’©å­é‡Œé¢ã€‚åœ¨çº¿è¿è¡Œæ•ˆæœ https://playcode.io/2458683

```js
function Timer() {
	const [seconds, setSeconds] = useState(0);

	useEffect(() => {
		console.log("ç»„ä»¶æŒ‚è½½ï¼šå¯åŠ¨å®šæ—¶å™¨");
		const intervalId = setInterval(() => {
			setSeconds((s) => s + 1);
		}, 1000);

		// è¿”å›æ¸…ç†å‡½æ•°ï¼Œç»„ä»¶å¸è½½æ—¶è°ƒç”¨
		return () => {
			clearInterval(intervalId);
			console.log("ç»„ä»¶å¸è½½ï¼šæ¸…é™¤å®šæ—¶å™¨");
		};
	}, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œç¡®ä¿åªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶è¿è¡Œä¸€æ¬¡

	return <div>è®¡æ—¶ï¼š{seconds} ç§’</div>;
}
```
