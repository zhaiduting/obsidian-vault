Dockerfile 内容如下

```
# 第一阶段：负责编译
FROM gcc:latest AS builder
WORKDIR /app
COPY hello.c .
RUN gcc -static hello.c -o hello

# 第二阶段：极度精简的运行环境
FROM scratch
COPY --from=builder /app/hello /hello
CMD ["/hello"]
```

终端敲入以下命令完成构建并运行

```sh
docker build -t hello .
docker run hello
```

### 不能在 `scratch` 镜像里执行 `gcc`

`scratch` 是：

> 完全空的镜像 —— 里面什么都没有

它的特点：

- 没有 `/bin/sh`
- 没有 `/lib`
- 没有 `/usr`
- 没有动态链接器
- 当然也没有 `gcc`

可以理解为：

> `scratch` 就像一个格式化后的空硬盘。

所以：

`RUN gcc hello.c -o hello`

在 `scratch` 中会直接报错：

`exec /bin/sh: no such file or directory`

### 最终镜像会非常小

Docker 的规则是：

> **只有最后一个阶段会成为最终镜像**。

可以这样理解：

- 第一阶段 = 工厂车间（有大型机器：gcc）
- 第二阶段 = 产品包装盒（只有成品）

你不会把加工设备一起装进包装盒。
