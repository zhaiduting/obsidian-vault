---
author:
  - Gemini
created: 2026-01-11
---

使用 `kind` 创建多节点集群非常简单。你只需要编写一个简单的 **YAML 配置文件**，并在其中定义你想要的节点（nodes）角色即可。

以下是创建一个 **“一主两从”**（1个 Control Plane 节点，2个 Worker 节点）集群的步骤：

---

### 第一步：创建配置文件

在本地创建一个名为 `kind-config.yaml` 的文件，内容如下：

```yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane  # 主节点
- role: worker         # 从节点 1
- role: worker         # 从节点 2
```

### 第二步：使用配置文件创建集群

在终端执行以下命令，通过 `--config` 参数指定刚才创建的文件：

```sh
kind create cluster --config kind-config.yaml

# 也可以使用 name 选项指定集群的名称
# kind create cluster --name my-multi-node-cluster --config kind-config.yaml
# 如果省略 name 选项，则取 kind 作为默认值 

# 以下为最简命令（只能生成单节点集群）
# kind create cluster
```

---

### 第三步：验证节点状态

集群创建完成后，你可以运行以下命令来查看节点情况：

```sh
kubectl get nodes
```

你将会看到类似如下的输出，显示一个 control-plane 节点和两个 worker 节点：

| **NAME**           | **STATUS** | **ROLES**       | **AGE** | **VERSION** |
| ------------------ | ---------- | --------------- | ------- | ----------- |
| kind-control-plane | Ready      | `control-plane` | 1m      | v1.31.0     |
| kind-worker        | Ready      | `<none>`        | 1m      | v1.31.0     |
| kind-worker2       | Ready      | `<none>`        | 1m      | v1.31.0     |

## ![kind创建多节点集群](https://lib.zhaiduting.work.gd/uPic/kind%E5%88%9B%E5%BB%BA%E5%A4%9A%E8%8A%82%E7%82%B9%E9%9B%86%E7%BE%A4.png)

### 为什么需要多节点？

- **高可用测试：** 可以测试 Pod 在节点故障时的漂移行为。
- **亲和性实验：** 练习使用 `nodeSelector`、`affinity` 或 `taints/tolerations`。
- **真实模拟：** 更接近生产环境的逻辑布局。

**温馨提示：** 创建多节点集群会占用更多的内存和 CPU 资源（因为每个节点都是一个独立的 Docker 容器），请确保你的电脑配置充足。

---

### 关于 apiVersion

对于 `kind` 的集群配置文件（`kind: Cluster`），目前最主流且**唯一推荐**的版本是：`kind.x-k8s.io/v1alpha4`

直接运行 `kind create cluster`（不指定 `--config`）时，`kind` 在内部会生成一个**默认配置**。目前为止，默认使用的配置协议就是 **`kind.x-k8s.io/v1alpha4`**。

### 官方文档

链接为 https://kind.sigs.k8s.io/docs/user/configuration/
