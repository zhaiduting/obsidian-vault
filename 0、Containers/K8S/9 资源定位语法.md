[K8s 官方文档](https://kubernetes.io/docs/reference/kubectl/) 给出 `kubectl` 命令语法如下：

```sh
kubectl [command] [TYPE] [NAME] [flags]
```

其中 `TYPE` 指的是「资源类型」，`NAME` 指的是「资源名称」。

### 资源定位语法

其实就是选择特定的资源，可以表述为：

```yaml
ResourceSelector :=
  - None
  - ByType
  - ByTypeAndName
  - ByLabelSelector
  - ByFile
```

其中的 `ByTypeAndName` 其实就是将资源类型与资源名称组合在一起，准确引用特定资源的写法。基本组合方式有两种：

- 空格分割法，例如 `deployment my-app`
- 斜杆分割法，例如 `deployment/my-app`

这两种写法完全等价，引用的都是类型为 deployment 并且名为 `my-app` 的资源。

### 以 set image 为例

以下两条命令效果完全相同，都是将名为 my-app 的 deployment 的 web-server 容器的镜像设置为 `nginx:1.25.3`

```sh
# 斜杆分割
kubectl set image deployment/my-app web-server=nginx:1.25.3

# 空格分割
kubectl set image deployment my-app web-server=nginx:1.25.3

# 不能使用小数点分割！
# kubectl set image deployment.my-app web-server=nginx:1.25.3 ❌
```

两种方式各有优势：

- **推荐用“斜杠版” (`deployment/my-app`)：** 当你要在一个命令里处理多个不同的资源时，必须用这种写法。比如： `kubectl get deployment/nginx svc/nginx-service` （同时获取部署和服务）。
- **推荐用“空格版” (`deployment my-app`)：** 这种写法在配合 Shell 补全（Tab 键）时通常更方便。当你输入 `deployment` 然后按 Tab 时，它会自动帮你列出所有的部署名称。

### 拆解 set image 命令

set image 命令看起来很复杂，但它仍然符合 `kubectl` 命令语法

| **语法成分**  | **对应部分**               | **说明**                                                                                                            |
| ------------- | -------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **[command]** | `set image`                | 这里的 `set` 是基础命令，`image` 是子命令。在 Kubernetes 中，这类组合被视为一个完整的操作指令。                     |
| **[TYPE]**    | `<资源类型>`               | 例如 `deployment`、`statefulset` 或 `daemonset`。                                                                   |
| **[NAME]**    | `<资源名称>`               | 对应你在集群中定义的资源名字。                                                                                      |
| **[flags]**   | `<容器名>=<镜像名>:<标签>` | 这部分属于该命令特有的**参数（Arguments）**。虽然在语法定义中常统称为 `flags`，但它包含了执行该命令所需的具体数据。 |
